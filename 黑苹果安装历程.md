# 记一次自己的黑苹果安装历程
## 概述
  我本人是一名前端开发工程师，开发工具是mac pro 15款，这款电脑用了将近4年了，从一开始的不适应，到现在的离不开，苹果的产品给我一段非常好的开发体验，不论是系统稳定性，还是界面美观，交互方式人性化，以及产品设计本身都让人惊叹。
  自从用了macOS系统后，便对window的操作非常的不适应，由于Mac价格比较贵，以我的经济条件也不可能把家里的所有电脑都换成Mac，所以一直在找一个与macOS相近的系统，之前也使用过Ubuntu以及国产的deepin系统，这个系统都是基于linux内核，生态比较差，很多生活中的必须软件都不支持，国产deepin系统卡顿，容易崩溃，使用体验都不好。

  由于自己的视野狭窄，一直都以为Mac系统都是和苹果产品绑定的，其他产品无法安装。所以也没往这方面考虑。最近一个同事买了一个Mac pro,无意间听他说他之前就是使用台式机安装了苹果系统，这一句话激起了我的好奇心。经过一段时间的查询(大概一周)和摸索，觉得可以做了之后，开始了我的黑苹果安装之路。

  由于我们本身并不是以安装黑苹果作为职业的，在摸索过程中，一些前辈嘱托，由于每个人的硬件差别很大，加上macOS生态的封闭，不太可能对所有的硬件都能支持，所以安装黑苹果秉承着够用就行。当然，未来如果有时间，并且对黑苹果抱有极大的兴趣，可以更深入的了解。

  够用的标准：界面显示正常无抖动、花屏现象，声卡、网卡、显卡驱动正常，usb接口可以使用，音频接口正常，摄像头正常。

## 一、硬件介绍

|设备类型 | CPU | 主板 | 显卡 | 声卡 |
| :----: | :----: | :----: | :----: | :----: |
| 台式机 | i5-6500 | B150M-K | HD530 | ALC 888B |


## 二、工具及镜像
镜像烧制工具: [balena Etcher](https://www.balena.io/etcher/)

镜像地址：[macOS-Mojave-10.14.4](https://blog.daliansky.net/macOS-Mojave-10.14.4-18E226-official-version-with-Clover-4903-original-image.html)

clover地址: [clover](https://mackie100projects.altervista.org/download-clover-configurator/)

## 三、制作启动盘

1. 准备一个8g大小的U盘，因为镜像烧制至少需要7.5G的存储空间，少于这个会烧制失败
2. 安装balena Etcher，并打开。

![](https://ws2.sinaimg.cn/large/006tNc79ly1g2v1mdccs2j318g0qot8z.jpg)

选择选择镜像-> 选择U盘-> 点击Flash

等待半小时左右，启动盘制作完成


## 四、系统安装

### BIOS设置

mac启动项的BIOS设置与windows不同，需要做一些特殊的处理，具体如下
需要禁止核显的使用，操作系统需设置为其他操作系统


### 正式安装

插入启动盘 -> 主板设置启动盘引导启动 -> 进入启动盘引导界面 -> 选择‘boot macos install from Mojave’开始

### 给Mac系统安装引导程序

## 五、驱动配置
系统安装成功后，需要对网卡、声卡、显卡驱动进行配置，需要配置启动初始化选项

#### 三卡驱动配置
1. 网卡配置 一般集成在主板上的网卡都是免驱的，我电脑上的网卡就是这样，所以这一步我省略了。
2. 声卡配置 我的声卡型号ALC 888b，在网上找了很久才找到相关配置，id应该是11
3. 显卡配置 苹果系统显卡驱动已不支持VGA,所以配置之前先检查自己主机和显示器的连接接口是否是VGA，如果是，可以看看主机有无其他接口，如果有，可以到网上买一个转接VGA的转接口，我就买了一个DVI-D转VGA的转接头。

#### 其他驱动配置
1. usb3.0 由于我没有usb3.0U盘，所以没做
2. 摄像头驱动 外接了一个免驱摄像头，可以正常使用，所以这个也没做
3. 蓝牙驱动 我的台式机没有蓝牙功能，这个也没做
4. 无线网卡驱动 台式机上不带无线网卡，所以没做


## 启动项配置
  boot配置，安装时引导程序配置比较通用，采用的是啰嗦模式，可以打印启动日志，这样在安装时容易排错，但是在安装完成后，这些东西就不是很友好了。所以需要作出调整。
  1. 调整启动配置
  2. 更改启动等待时间
  3. 隐藏无关的引导项
  4. 修改主题 修改主题只要将主题文件放置到EFI->clover->themes文件夹下，然后修改config.split的默认主题名称,这里分享一下主题的下载
      链接：https://pan.baidu.com/s/1LveJ7-11N-jSL6CYaj-I1A 提取码：25ve

## 补充
  其实完成以上就能正常使用了，但是为提高体验，可以有以下做法
  1. 开启显示器HIDPI ：
    [HiDPI是什么？以及黑苹果如何开启HiDPI](https://www.sqlsec.com/2018/09/hidpi.html)； [使用HIDPI解决睡眠唤醒黑屏、花屏及连接外部显示器的正确姿势](https://blog.daliansky.net/Use-HIDPI-to-solve-sleep-wake-up-black-screen,-Huaping-and-connect-the-external-monitor-the-correct-posture.html)


参考资料：
1. 本次安装借鉴了youtube博主[黑影儿TV](https://www.youtube.com/channel/UCBvcXPwXIRhKuTxe-6sVT8A/playlists)的安装教程
2. 借鉴了[黑果小兵部落阁](https://blog.daliansky.net/)的很多资料，尤其是声卡和显卡id的选择上。
3. 主题采用了bilibili博主[
NoneLjw](https://www.bilibili.com/video/av32933350/?redirectFrom=h5)分享的主题
4. 启动项、引导盘的隐藏等采用了远景论坛的分享
5. 安装前质询过淘宝店家，店家给了可以安装的肯定，告诉VGA接口无法使用，并建议我使用DVI-D转VGA。



# 文件分片上传
分片上传有两种思路

### 1、单文件多分片上传

比较适合大文件上传、能保证单个文件以最大的速度上传，这种上传需在第一个分片和最后一个分片做特殊处理，保证开启文件上传和结束文件上传正常执行；

### 2、多文件单分片上传

比较适合数量较多的小文件上传，提高文件上传的并发量。


ps:上传大文件时需要处理的特殊事故
上传失败后，应对失败的上传时间进行回滚，重新上传该次失败的上传，对于反复失败上传要限定重复上传次数，初步设定为10次，超过是次就不要再回滚了。

另外在以下几种情形不必要上传：
1. 网络中断：navigator.inline为false 
2. 主动取消上传后，出现的上传错误
3. 接口返回404
4. 多次上传失败后，初步定为10次